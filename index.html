<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>40x20 Futsal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial, sans-serif; margin: 0; background:#f2f2f2; }
header { background:#111; color:#fff; padding:15px; text-align:center; }
nav button { margin:5px; padding:10px; }
section { padding:15px; display:none; }
table { width:100%; border-collapse: collapse; background:#fff; }
th, td { border:1px solid #ccc; padding:6px; text-align:center; }
th { background:#eee; }
input, select, button { padding:6px; margin:5px 0; width:100%; }
.admin { max-width:400px; background:#fff; padding:15px; }
</style>
</head>

<body>

<header>
<h2>40x20 FUTSAL</h2>
<nav>
<button onclick="mostrar('tabla')">Tabla</button>
<button onclick="mostrar('admin')">Panel Admin</button>
</nav>
</header>

<!-- TABLA -->
<section id="tabla">
<h3>Tabla de posiciones</h3>
<select id="filtroTorneo" onchange="cargarTabla()">
<option value="LPF">LPF</option>
<option value="APOFUSA">APOFUSA</option>
<option value="LAAMBA">LAAMBA</option>
</select>

<table>
<thead>
<tr>
<th>Equipo</th>
<th>PJ</th>
<th>GF</th>
<th>GC</th>
<th>DG</th>
<th>PTS</th>
</tr>
</thead>
<tbody id="tablaBody"></tbody>
</table>
</section>

<!-- ADMIN -->
<section id="admin">
<div class="admin">
<h3>Panel Admin</h3>

<input id="equipoNombre" placeholder="Nombre del equipo">
<select id="equipoTorneo">
<option value="LPF">LPF</option>
<option value="APOFUSA">APOFUSA</option>
<option value="LAAMBA">LAAMBA</option>
</select>

<button onclick="agregarEquipo()">Agregar equipo</button>
<p id="msg"></p>
</div>
</section>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyBiUJW7PVnSbWQVs0RpBb3mNdUB-QEjM9o",
authDomain: "x20-futsal-afb4b.firebaseapp.com",
projectId: "x20-futsal-afb4b",
storageBucket: "x20-futsal-afb4b.firebasestorage.app",
messagingSenderId: "635511926858",
appId: "1:635511926858:web:aa5cacbf90bee34af976b3"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.mostrar = (id) => {
document.querySelectorAll("section").forEach(s => s.style.display="none");
document.getElementById(id).style.display="block";
};

mostrar("tabla");

window.agregarEquipo = async () => {
const nombre = equipoNombre.value.trim();
const torneo = equipoTorneo.value;

if(!nombre) return;

await addDoc(collection(db,"equipos"),{
nombre,
torneo,
pj:0, gf:0, gc:0, pts:0
});

equipoNombre.value="";
msg.innerText="Equipo agregado âœ”";
cargarTabla();
};

window.cargarTabla = async () => {
const torneo = filtroTorneo.value;
tablaBody.innerHTML="";

const snap = await getDocs(collection(db,"equipos"));
snap.forEach(doc=>{
const e = doc.data();
if(e.torneo === torneo){
const tr = document.createElement("tr");
tr.innerHTML=`
<td>${e.nombre}</td>
<td>${e.pj}</td>
<td>${e.gf}</td>
<td>${e.gc}</td>
<td>${e.gf - e.gc}</td>
<td>${e.pts}</td>
`;
tablaBody.appendChild(tr);
}
});
};

cargarTabla();
</script>

</body>
</html>
