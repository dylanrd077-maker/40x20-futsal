<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>40x20 Futsal</title>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
*{box-sizing:border-box;font-family:system-ui}
body{margin:0;background:#f2f4f8;color:#111}
header{background:#071b33;padding:22px;text-align:center}
header img{width:130px}
header p{color:#dbe4f0;margin:8px 0 0;font-style:italic}

.container{padding:20px}
.view{display:none}

.btn{
background:#fff;
border-radius:14px;
padding:16px;
margin-bottom:12px;
font-weight:600;
box-shadow:0 6px 16px rgba(0,0,0,.1);
cursor:pointer
}
.btn-dark{background:#071b33;color:#fff}

h3{margin:20px 0 12px}

.carousel{
display:flex;
gap:14px;
overflow-x:auto;
}
.card{
min-width:220px;
background:#fff;
padding:14px;
border-radius:14px;
box-shadow:0 6px 14px rgba(0,0,0,.1);
}

.input{
width:100%;
padding:12px;
margin-bottom:10px;
border-radius:10px;
border:1px solid #ccc;
}

.table{
width:100%;
border-collapse:collapse;
}
.table th,.table td{
padding:8px;
border-bottom:1px solid #ddd;
text-align:center;
}
</style>
</head>

<body>

<header>
<img src="IMG_3936.png">
<p>FUTSAL: la pasión que nos une.</p>
</header>

<div class="container">

<!-- HOME -->
<div id="home">
<div class="btn btn-dark" onclick="go('torneos')">TORNEOS</div>

<h3>NOTICIAS</h3>
<div class="carousel">
<div class="card">Noticia 1</div>
<div class="card">Noticia 2</div>
<div class="card">Noticia 3</div>
</div>

<h3>SPONSORS</h3>
<div class="carousel">
<div class="card">Sponsor</div>
<div class="card">Sponsor</div>
</div>

<div class="btn" onclick="openAdmin()">ADMIN</div>
<div class="btn" onclick="openArbitros()">ÁRBITROS</div>

<a class="btn" href="https://www.instagram.com/_40x20futsal" target="_blank">
Instagram
</a>
</div>

<!-- TORNEOS -->
<div id="torneos" class="view">
<div class="btn btn-dark" onclick="back()">← Volver</div>
<div class="btn" onclick="openTorneo('LPF')">LPF</div>
<div class="btn" onclick="openTorneo('LaAMBA')">LaAMBA</div>
<div class="btn" onclick="openTorneo('APOFUSA')">A.Po.Fu.Sa</div>
</div>

<!-- TABLA -->
<div id="tabla" class="view">
<div class="btn btn-dark" onclick="back()">← Volver</div>
<h3 id="tituloTabla"></h3>
<table class="table">
<thead>
<tr>
<th>Equipo</th><th>PJ</th><th>GF</th><th>GC</th><th>DG</th><th>PTS</th>
</tr>
</thead>
<tbody id="tablaBody"></tbody>
</table>
</div>

<!-- ADMIN -->
<div id="adminLogin" class="view">
<input id="adminUser" class="input" placeholder="Usuario">
<input id="adminPass" type="password" class="input" placeholder="Clave">
<button class="btn btn-dark" onclick="loginAdmin()">Ingresar</button>
</div>

<div id="adminPanel" class="view">
<div class="btn btn-dark" onclick="back()">← Volver</div>
<h3>Agregar equipo</h3>
<input id="eqNombre" class="input" placeholder="Nombre del equipo">
<select id="eqTorneo" class="input">
<option>LPF</option>
<option>LaAMBA</option>
<option>APOFUSA</option>
</select>
<button class="btn" onclick="addEquipo()">Guardar</button>
</div>

<!-- ARBITROS -->
<div id="arbLogin" class="view">
<input id="arbUser" class="input" placeholder="Usuario">
<input id="arbPass" type="password" class="input" placeholder="Clave">
<button class="btn btn-dark" onclick="loginArbitro()">Ingresar</button>
</div>

</div>

<script>
/* FIREBASE */
firebase.initializeApp({
apiKey: "AIzaSyBiUJW7PVnSbWQVs0RpBb3mNdUB-QEjM9o",
authDomain: "x20-futsal-afb4b.firebaseapp.com",
projectId: "x20-futsal-afb4b"
});
const db = firebase.firestore();

/* NAVEGACION */
let stack=['home'];
function go(id){
document.querySelectorAll('.view,#home').forEach(v=>v.style.display='none');
document.getElementById(id).style.display='block';
stack.push(id);
}
function back(){
stack.pop();
go(stack.pop());
}

/* TORNEOS */
function openTorneo(t){
go('tabla');
document.getElementById('tituloTabla').innerText=t;
const body=document.getElementById('tablaBody');
body.innerHTML='';
db.collection('equipos').where('torneo','==',t).get().then(s=>{
s.forEach(d=>{
const e=d.data();
body.innerHTML+=`
<tr>
<td>${e.nombre}</td>
<td>${e.PJ||0}</td>
<td>${e.GF||0}</td>
<td>${e.GC||0}</td>
<td>${e.DG||0}</td>
<td>${e.PTS||0}</td>
</tr>`;
});
});
}

/* ADMIN */
function openAdmin(){go('adminLogin')}
function loginAdmin(){
if(adminUser.value==='admin'&&adminPass.value==='admin123'){
go('adminPanel')
}else alert('Error')
}
function addEquipo(){
db.collection('equipos').add({
nombre:eqNombre.value,
torneo:eqTorneo.value,
PJ:0,GF:0,GC:0,DG:0,PTS:0
});
alert('Equipo agregado');
}

/* ARBITROS */
function openArbitros(){go('arbLogin')}
function loginArbitro(){
if(arbUser.value==='arbitro'&&arbPass.value==='1234'){
alert('Árbitro conectado (demo)');
back();
}else alert('Error');
}
</script>

</body>
</html>
